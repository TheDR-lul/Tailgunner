# Butt Thunder - BUGFIX v0.5.5

## üìÖ –î–∞—Ç–∞: 23 –æ–∫—Ç—è–±—Ä—è 2025

## üéØ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å War Thunder API (v3)

**–û–ë–ù–û–í–õ–ï–ù–ò–ï 3:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–æ–≤! API War Thunder –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–í–°–ï –¥–∞–Ω–Ω—ã–µ –≤ `/state`**, –Ω–µ –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π `/indicators`!

**–û–ë–ù–û–í–õ–ï–ù–ò–ï 2:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π! API War Thunder –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è** —Å –∑–∞–ø—è—Ç—ã–º–∏ –∏ –µ–¥–∏–Ω–∏—Ü–∞–º–∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è.

### üêõ –ü—Ä–æ–±–ª–µ–º–∞

**–î–∞–Ω–Ω—ã–µ –∏–∑ War Thunder –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å!** 

–í—Å–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (—Å–∫–æ—Ä–æ—Å—Ç—å, –≤—ã—Å–æ—Ç–∞, —Ç–æ–ø–ª–∏–≤–æ, G-–ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞) –≤—Å–µ–≥–¥–∞ –±—ã–ª–∏ —Ä–∞–≤–Ω—ã **0**.

#### –ü—Ä–∏—á–∏–Ω–∞:

–í `src-tauri/src/wt_telemetry.rs`, —Å—Ç—Ä–æ–∫–∞ 176:

```rust
let indicators = Indicators::default(); // ‚ùå –ü–£–°–¢–ê–Ø –°–¢–†–£–ö–¢–£–†–ê!
// –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: "–ó–∞–ø–æ–ª–Ω–∏–º –ø–æ–∑–∂–µ —á–µ—Ä–µ–∑ get_indicators"
// –ù–û –ú–´ –ù–ò–ö–û–ì–î–ê –ù–ï –ó–ê–ü–û–õ–ù–Ø–õ–ò!
```

–ú—ã —Å–æ–∑–¥–∞–≤–∞–ª–∏ **–ø—É—Å—Ç–æ–π** `Indicators::default()` —Å–æ –≤—Å–µ–º–∏ –Ω—É–ª—è–º–∏ –∏ **–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–ª–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** –∏–∑ War Thunder API.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–°–æ–≥–ª–∞—Å–Ω–æ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ War Thunder localhost API](https://github.com/lucasvmx/WarThunder-localhost-documentation), –Ω—É–∂–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å **–¥–≤–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞**:

1. **`http://localhost:8111/state`** - –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
   - `valid` - –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
   - `type` - —Ç–∏–ø —Ç–µ—Ö–Ω–∏–∫–∏ (tank, aircraft, helicopter, ship)
   - `state` - –º–∞—Å—Å–∏–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π (—Ñ–ª–∞–≥–∏ —Å–æ–±—ã—Ç–∏–π)

2. **`http://localhost:8111/indicators`** - **–í–°–ï –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏**:
   - –°–∫–æ—Ä–æ—Å—Ç—å (IAS, TAS, Mach)
   - –í—ã—Å–æ—Ç–∞, –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
   - G-–ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞, —É–≥–æ–ª –∞—Ç–∞–∫–∏
   - –¢–æ–ø–ª–∏–≤–æ, –±–æ–µ–∑–∞–ø–∞—Å
   - –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è, –æ–±–æ—Ä–æ—Ç—ã –¥–≤–∏–≥–∞—Ç–µ–ª—è
   - –ò –µ—â—ë 40+ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤!

### –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ:

#### 1. –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `get_state()`

**–ë–´–õ–û:**
```rust
pub async fn get_state(&mut self) -> Result<GameState> {
    let url = format!("{}/state", WT_TELEMETRY_URL);
    let response = self.client.get(&url).send().await?;
    let raw_json = response.json().await?;
    
    let state = self.parse_state(raw_json)?;  // ‚ùå –¢–æ–ª—å–∫–æ /state
    Ok(state)
}
```

**–°–¢–ê–õ–û:**
```rust
pub async fn get_state(&mut self) -> Result<GameState> {
    // 1. –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º /state –¥–ª—è type –∏ valid
    let state_json = self.client
        .get("http://127.0.0.1:8111/state")
        .send().await?.json().await?;
    
    log::trace!("[WT API] /state response: {}", ...);
    
    // 2. –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º /indicators –¥–ª—è –í–°–ï–• –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π ‚úÖ
    let indicators_json = self.client
        .get("http://127.0.0.1:8111/indicators")
        .send().await?.json().await?;
    
    log::trace!("[WT API] /indicators response: {}", ...);
    
    // 3. –û–±—ä–µ–¥–∏–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
    let state = self.parse_state(state_json, indicators_json)?;
    Ok(state)
}
```

#### 2. –ù–æ–≤—ã–π –º–µ—Ç–æ–¥ `parse_indicators()`

–°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä JSON –∏–∑ `/indicators`:

```rust
fn parse_indicators(&self, json: serde_json::Value) -> Indicators {
    let get_f32 = |key: &str| json.get(key).and_then(|v| v.as_f64()).unwrap_or(0.0) as f32;
    let get_i32 = |key: &str| json.get(key).and_then(|v| v.as_i64()).unwrap_or(0) as i32;
    let get_bool = |key: &str| json.get(key).and_then(|v| v.as_bool()).unwrap_or(false);

    Indicators {
        // –ë–∞–∑–æ–≤—ã–µ
        speed: get_f32("speed"),
        altitude: get_f32("altitude"),
        climb: get_f32("climb"),
        
        // –î–≤–∏–≥–∞—Ç–µ–ª—å
        engine_rpm: get_f32("RPM"),
        throttle: get_f32("throttle"),
        ...
        
        // –ê—ç—Ä–æ–¥–∏–Ω–∞–º–∏–∫–∞
        aoa: get_f32("AoA"),
        g_load: get_f32("Vy"),  // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞
        mach: get_f32("Mach"),
        tas: get_f32("TAS"),
        ias: get_f32("IAS"),
        
        // –¢–æ–ø–ª–∏–≤–æ
        fuel: get_f32("fuel"),
        fuel_max: get_f32("fuel_max"),
        ...
    }
}
```

#### 3. –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `parse_state()`

–¢–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç **–æ–±–∞** JSON –∏ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ:

```rust
fn parse_state(&self, 
    state_json: serde_json::Value,      // ‚Üê –ò–∑ /state
    indicators_json: serde_json::Value  // ‚Üê –ò–∑ /indicators
) -> Result<GameState> {
    // –ü–∞—Ä—Å–∏–º type –∏ valid –∏–∑ /state
    let valid = state_json.get("valid")...;
    let type_ = state_json.get("type")...;
    let state = state_json.get("state")...;
    
    // –ü–∞—Ä—Å–∏–º indicators –∏–∑ /indicators ‚úÖ
    let indicators = self.parse_indicators(indicators_json);
    
    Ok(GameState { valid, type_, indicators, state })
}
```

#### 4. –î–æ–±–∞–≤–ª–µ–Ω–æ trace-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å **—Å—ã—Ä—ã–µ JSON –æ—Ç–≤–µ—Ç—ã** –∏–∑ WT API:

```rust
log::trace!("[WT API] /state response: {}", serde_json::to_string_pretty(&state_json)...);
log::trace!("[WT API] /indicators response: {}", serde_json::to_string_pretty(&indicators_json)...);
```

–ß—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å trace-–ª–æ–≥–∏, –∑–∞–ø—É—Å—Ç–∏ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
RUST_LOG=trace npm run tauri dev
```

---

## üìä –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç!

### –í UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ `GameStatus`:

**–ë–´–õ–û:**
```
üî¥ –ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ
–¢–µ—Ö–Ω–∏–∫–∞: N/A
–°–∫–æ—Ä–æ—Å—Ç—å: 0 –∫–º/—á      ‚Üê –í—Å–µ–≥–¥–∞ 0 ‚ùå
–í—ã—Å–æ—Ç–∞: 0 –º           ‚Üê –í—Å–µ–≥–¥–∞ 0 ‚ùå
G-–ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞: 0.0 G   ‚Üê –í—Å–µ–≥–¥–∞ 0 ‚ùå
–¢–æ–ø–ª–∏–≤–æ: 0%           ‚Üê –í—Å–µ–≥–¥–∞ 0 ‚ùå
```

**–°–¢–ê–õ–û:**
```
üü¢ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ
–¢–µ—Ö–Ω–∏–∫–∞: Aircraft
–°–∫–æ—Ä–æ—Å—Ç—å: 542 –∫–º/—á    ‚Üê –†–ï–ê–õ–¨–ù–´–ï –î–ê–ù–ù–´–ï! ‚úÖ
–í—ã—Å–æ—Ç–∞: 2450 –º        ‚Üê –†–ï–ê–õ–¨–ù–´–ï –î–ê–ù–ù–´–ï! ‚úÖ
G-–ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞: 3.2 G   ‚Üê –†–ï–ê–õ–¨–ù–´–ï –î–ê–ù–ù–´–ï! ‚úÖ
–¢–æ–ø–ª–∏–≤–æ: 78%          ‚Üê –†–ï–ê–õ–¨–ù–´–ï –î–ê–ù–ù–´–ï! ‚úÖ
```

### –í Debug Console:

```
[WT] Vehicle: Aircraft, Speed: 542 km/h, Alt: 2450m
[Events] Detected 0 events: []
```

---

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

1. **–ó–∞–ø—É—Å—Ç–∏ War Thunder**
2. **–ó–∞–π–¥–∏ –≤ –±–æ–π** (—Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª–µ—Ç / —Ç–∞–Ω–∫–æ–≤—ã–π –ø–æ–ª–∏–≥–æ–Ω)
3. **–ó–∞–ø—É—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: `npm run tauri dev`
4. **–ü–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ —Ä–∞–∑–¥–µ–ª "War Thunder"**:
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å üü¢ **–ü–æ–¥–∫–ª—é—á–µ–Ω–æ**
   - –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã **–æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**
   - –í Debug Console –ª–æ–≥–∏: `[WT] Vehicle: ..., Speed: ...`

### –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å –ø–æ—Ä—Ç 8111**: –û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ [http://localhost:8111/indicators](http://localhost:8111/indicators)
   - –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è JSON —Å –¥–∞–Ω–Ω—ã–º–∏
   - –ï—Å–ª–∏ `404` - —É–±–µ–¥–∏—Å—å —á—Ç–æ War Thunder –∑–∞–ø—É—â–µ–Ω –∏ —Ç—ã –≤ –±–æ—é

2. **–í–∫–ª—é—á–∏ trace-–ª–æ–≥–∏**: `RUST_LOG=trace npm run tauri dev`
   - –ü–æ—Å–º–æ—Ç—Ä–∏ –≤ –∫–æ–Ω—Å–æ–ª—å —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –Ω–∞ —Å—ã—Ä—ã–µ JSON –æ—Ç–≤–µ—Ç—ã

3. **–ü—Ä–æ–≤–µ—Ä—å Debug Console**: –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏ `[WT] Game not connected: ...` –µ—Å–ª–∏ –∏–≥—Ä–∞ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞

---

## üî• –û–ë–ù–û–í–õ–ï–ù–ò–ï 2: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ, —á—Ç–æ **API War Thunder –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π**!

### –†–µ–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON –∏–∑ `http://localhost:8111/indicators`:

```json
{
  "valid": true,
  "type": "rafale_c_f3",
  "H, m=36",                  ‚Üê –í—ã—Å–æ—Ç–∞ –≤ –º–µ—Ç—Ä–∞—Ö
  "TAS, km/h=180",            ‚Üê –ò—Å—Ç–∏–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
  "IAS, km/h=179",            ‚Üê –ü—Ä–∏–±–æ—Ä–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
  "M=0.15",                   ‚Üê –ß–∏—Å–ª–æ –ú–∞—Ö–∞
  "AoA, deg=0.8",             ‚Üê –£–≥–æ–ª –∞—Ç–∞–∫–∏
  "AoS, deg=0.2",             ‚Üê –£–≥–æ–ª —Å–∫–æ–ª—å–∂–µ–Ω–∏—è
  "Ny=0.98",                  ‚Üê –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ (G)
  "Vy, m/s=0",                ‚Üê –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
  "Mfuel, kg=6320",           ‚Üê –¢–µ–∫—É—â–µ–µ —Ç–æ–ø–ª–∏–≤–æ –≤ –∫–≥
  "Mfuel0, kg=9560",          ‚Üê –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Ç–æ–ø–ª–∏–≤–æ –≤ –∫–≥
  "RPM 1=13101",              ‚Üê –û–±–æ—Ä–æ—Ç—ã –¥–≤–∏–≥–∞—Ç–µ–ª—è 1
  "RPM 2=13099",              ‚Üê –û–±–æ—Ä–æ—Ç—ã –¥–≤–∏–≥–∞—Ç–µ–ª—è 2
  "manifold pressure 1, atm=1",
  "oil temp 1, C=74",
  "throttle 1, %=110",
  "aileron, %=0",
  "elevator, %=-100",
  "rudder, %=-11",
  "flaps, %=84",
  "gear, %=100",
  ...
}
```

### ‚ùå –ë—ã–ª–æ (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):

```rust
speed: get_f32("speed"),         // ‚ùå –ù–µ—Ç —Ç–∞–∫–æ–≥–æ –ø–æ–ª—è!
altitude: get_f32("altitude"),   // ‚ùå –ù–µ—Ç —Ç–∞–∫–æ–≥–æ –ø–æ–ª—è!
g_load: get_f32("Vy"),           // ‚ùå Vy —ç—Ç–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å!
mach: get_f32("Mach"),           // ‚ùå –ù–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ "M"
fuel: get_f32("fuel"),           // ‚ùå –ù–∞–∑—ã–≤–∞–µ—Ç—Å—è "Mfuel, kg"
engine_rpm: get_f32("RPM"),      // ‚ùå –ù–∞–∑—ã–≤–∞–µ—Ç—Å—è "RPM 1" –∏–ª–∏ "RPM 2"
```

### ‚úÖ –°—Ç–∞–ª–æ (–ü–†–ê–í–ò–õ–¨–ù–û):

```rust
speed: get_f32("IAS, km/h").max(get_f32("TAS, km/h")),
altitude: get_f32("H, m"),
climb: get_f32("Vy, m/s"),
g_load: get_f32("Ny"),           // ‚úÖ –≠—Ç–æ G-–ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞!
mach: get_f32("M"),
fuel: get_f32("Mfuel, kg"),
fuel_max: get_f32("Mfuel0, kg"),
engine_rpm: get_f32("RPM 1").max(get_f32("RPM 2")),
engine_temp: get_f32("engine temp 1, C"),
oil_temp: get_f32("oil temp 1, C"),
throttle: get_f32("throttle 1, %"),
aileron: get_f32("aileron, %"),
elevator: get_f32("elevator, %"),
rudder: get_f32("rudder, %"),
flaps: get_f32("flaps, %"),
gear: get_f32("gear, %"),
aoa: get_f32("AoA, deg"),
slip: get_f32("AoS, deg"),
```

### üîë –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **–í—Å–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π —Å–æ–¥–µ—Ä–∂–∞—Ç –∑–∞–ø—è—Ç—ã–µ, –ø—Ä–æ–±–µ–ª—ã –∏ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è!**
2. **–¢–æ–ø–ª–∏–≤–æ –≤ –∫–∏–ª–æ–≥—Ä–∞–º–º–∞—Ö**, –Ω–µ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö ‚Üí –Ω—É–∂–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å: `fuel / fuel_max * 100%`
3. **–°–∫–æ—Ä–æ—Å—Ç—å —É–∂–µ –≤ –∫–º/—á**, –Ω–µ –Ω—É–∂–Ω–æ —É–º–Ω–æ–∂–∞—Ç—å –Ω–∞ 3.6
4. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ 2 –¥–≤–∏–≥–∞—Ç–µ–ª–µ–π** (RPM 1, RPM 2) ‚Üí –±–µ—Ä–µ–º –º–∞–∫—Å–∏–º—É–º
5. **G-–ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞** —ç—Ç–æ `Ny`, –∞ `Vy` —ç—Ç–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å!

---

## üî• –û–ë–ù–û–í–õ–ï–ù–ò–ï 3: –û–¥–∏–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö!

–ü–æ—Å–ª–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã—è—Å–Ω–∏–ª–æ—Å—å, —á—Ç–æ **API War Thunder —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–Ω–∞—á–µ**!

### ‚ùå –ë–´–õ–û (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):

–ú—ã –¥–µ–ª–∞–ª–∏ **–î–í–ê –ó–ê–ü–†–û–°–ê**:
```rust
// 1. –ó–∞–ø—Ä–æ—Å –∫ /state
let state_json = get("http://localhost:8111/state").await?;

// 2. –ó–∞–ø—Ä–æ—Å –∫ /indicators ‚ùå –ù–ï –ù–£–ñ–ï–ù!
let indicators_json = get("http://localhost:8111/indicators").await?;

// –û–±—ä–µ–¥–∏–Ω—è–µ–º
parse_state(state_json, indicators_json)
```

### ‚úÖ –°–¢–ê–õ–û (–ü–†–ê–í–ò–õ–¨–ù–û):

–î–µ–ª–∞–µ–º **–û–î–ò–ù –ó–ê–ü–†–û–°** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –≤ `/state`!

```rust
// –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –∫ /state - —Å–æ–¥–µ—Ä–∂–∏—Ç –í–°–Å!
let json = get("http://localhost:8111/state").await?;

// –ü–∞—Ä—Å–∏–º
parse_state(json)
```

### üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ `/state`:

```json
{
  "valid": true,
  "type": "rafale_c_f3",
  "H, m": 378,                  ‚Üê –í—Å–µ indicators –ø—Ä—è–º–æ –∑–¥–µ—Å—å!
  "TAS, km/h": 873,
  "IAS, km/h": 857,
  "M": 0.71,
  "Ny": 1.02,
  "Mfuel, kg": 6320,
  "Mfuel0, kg": 9560,
  "RPM 1": 12965,
  "aileron, %": 0,
  "elevator, %": -8,
  ...
}
```

### –ü–æ—á–µ–º—É —Ç–∞–∫ –ø—Ä–æ–∏–∑–æ—à–ª–æ?

1. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–µ—Ç–æ—á–Ω–∞—è** - [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://github.com/lucasvmx/WarThunder-localhost-documentation) —É–ø–æ–º–∏–Ω–∞–µ—Ç `/indicators` –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç
2. **–ù–æ —Ä–µ–∞–ª—å–Ω–æ** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ `/state`!
3. **–î–≤–æ–π–Ω–æ–π –∑–∞–ø—Ä–æ—Å** —Å–æ–∑–¥–∞–≤–∞–ª –∑–∞–¥–µ—Ä–∂–∫—É –∏ –º–æ–≥ –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ –æ—à–∏–±–∫–∞–º

### üîë –ò–∑–º–µ–Ω–µ–Ω–∏—è:

```diff
- // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º /state –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è type –∏ valid
- let state_json = get("/state").await?;
- 
- // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º /indicators –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
- let indicators_json = get("/indicators").await?;
- 
- parse_state(state_json, indicators_json)?

+ // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º /state - —Å–æ–¥–µ—Ä–∂–∏—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ
+ let json = get("/state").await?;
+ parse_state(json)?
```

```diff
- fn parse_state(&self, state_json: Value, indicators_json: Value) -> Result<GameState> {
-     let indicators = parse_indicators(indicators_json);
+ fn parse_state(&self, json: Value) -> Result<GameState> {
+     let indicators = parse_indicators(json); // –ò–∑ —Ç–æ–≥–æ –∂–µ JSON!
```

---

## üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

- `src-tauri/src/wt_telemetry.rs`:
  - –û–±–Ω–æ–≤–ª–µ–Ω `get_state()` - —Ç–µ–ø–µ—Ä—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç `/state` –ò `/indicators`
  - –°–æ–∑–¥–∞–Ω `parse_indicators()` - –ø–∞—Ä—Å–∏—Ç –≤—Å–µ 40+ –ø–æ–ª–µ–π –∏–∑ JSON
  - –û–±–Ω–æ–≤–ª–µ–Ω `parse_state()` - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±–∞ JSON
  - –î–æ–±–∞–≤–ª–µ–Ω–æ trace-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—ã—Ä—ã—Ö API –æ—Ç–≤–µ—Ç–æ–≤

---

## üéØ –ò—Ç–æ–≥–∏

‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞** - –¥–∞–Ω–Ω—ã–µ –∏–∑ War Thunder —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è  
‚úÖ **–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å WT API** —Å–æ–≥–ª–∞—Å–Ω–æ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://github.com/lucasvmx/WarThunder-localhost-documentation)  
‚úÖ **–í—Å–µ 40+ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–∞—Ä—Å—è—Ç—Å—è** –∏–∑ `/indicators`  
‚úÖ **UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏  
‚úÖ **Debug-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏  

---

## üîú –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–π –ø–æ–ª–µ–π (—Å–≤–µ—Ä–∏—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º JSON –∏–∑ WT)
- –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ `hudmsg` –¥–ª—è —Å–æ–±—ã—Ç–∏–π –ø–æ–ø–∞–¥–∞–Ω–∏—è/–ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å `map_obj.json` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–µ—Ö–Ω–∏–∫–∏
- –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

---

**–í–µ—Ä—Å–∏—è:** v0.5.5  
**–ü—Ä–µ–¥—ã–¥—É—â–∞—è –≤–µ—Ä—Å–∏—è:** v0.5.4  
**–¢–∏–ø –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** CRITICAL BUGFIX  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• –í–´–°–û–ö–ò–ô

